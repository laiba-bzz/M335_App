@override
void initState() {
  super.initState();
  _intervalController = TextEditingController(text: '$_intervalMeters');
  // Location-Updates starten
  _positionSub = Geolocator.getPositionStream(
    locationSettings: const LocationSettings(
      accuracy: LocationAccuracy.best,
      distanceFilter: 1,
    ),
  ).listen(_onPosition);
}

void _onPosition(Position pos) {
  if (_lastPos != null) {
    final inc = Geolocator.distanceBetween(
      _lastPos!.latitude,
      _lastPos!.longitude,
      pos.latitude,
      pos.longitude,
    );
    _totalDistance += inc;
    _bufferDistance += inc;
    _moving = pos.speed > 0.5;

    if (_bufferDistance >= _intervalMeters) {
      _vibrationCount++;
      print('ðŸ”” Vibration #$_vibrationCount ausgelÃ¶st bei Gesamtdistanz '
            '${_totalDistance.toStringAsFixed(0)} m');
      Vibration.vibrate(duration: 200);
      _bufferDistance = 0;
    }
    setState(() {});
  }
  _lastPos = pos;
}
